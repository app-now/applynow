
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head id="ctl00_Head1"><meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
    <!--<meta http-equiv="X-UA-Compatible" content="IE=edge" />-->
    <meta name="description" /><meta name="keywords" /><title>
	Agility Tracking
</title><link href="include/webstyle.css" rel="stylesheet" type="text/css" />
    <script type="text/javascript" language="javascript" src="/include/Date.js"></script>
    <script type="text/javascript" language="javascript" src="/include/System.js"></script>
    <script type="text/javascript" language="javascript" src="/include/jsrsClient.js"></script>
    <script type="text/javascript" language="javascript" src="/include/Popup.js"></script>
    <script type="text/javascript" language="javascript" src="/include/Page.js"></script>
    <script type="text/javascript" language="javascript" src="/include/Xml.js"></script>
    <script type="text/javascript" language="javascript" src="/include/Style.js"></script>
    <script type="text/javascript" language="javascript" src="/include/CalendarBuilder.js"></script>
    <script type="text/javascript" language="javascript" src="/include/BrowserCompatable.js"></script>
    <script type="text/javascript" language="javascript" src="/include/MicrosoftAjax.js"></script>
	<script type="text/javascript" language="javascript" src="/include/x_core.js"></script>
	<script type="text/javascript" language="javascript" src="/include/xaddeventlistener.js"></script>
	<script type="text/javascript" language="javascript" src="/include/xtableheaderfixed.js"></script>
	<script type="text/javascript" language="javascript" src="/include/boxover.js"></script>
	
    <style type="text/css" media="screen,print,projection"></style>
    
<script type="text/javascript" language="JavaScript">
var elems = new Array();
elems["ctlHeader"] = "ctl00_ctlHeader";elems["contentHead"] = "ctl00_contentHead";elems["hdnWeightBaseUnit"] = "ctl00_contentMain_hdnWeightBaseUnit";elems["txtLoadMessage"] = "ctl00_contentMain_txtLoadMessage";elems["txtGUID"] = "ctl00_contentMain_txtGUID";elems["imgBytes"] = "ctl00_contentMain_imgBytes";elems["txtAction"] = "ctl00_contentMain_txtAction";elems["fldset1"] = "ctl00_contentMain_fldset1";elems["spnMessage"] = "ctl00_contentMain_spnMessage";elems["FieldsetLogo"] = "ctl00_contentMain_FieldsetLogo";elems["divDetails"] = "ctl00_contentMain_divDetails";elems["hdnAgilityCountryID"] = "ctl00_contentMain_hdnAgilityCountryID";elems["hdnAgilityCountry"] = "ctl00_contentMain_hdnAgilityCountry";elems["hdnContainerNos"] = "ctl00_contentMain_hdnContainerNos";elems["hdnname"] = "ctl00_contentMain_hdnname";elems["hdnTotalContainerOld"] = "ctl00_contentMain_hdnTotalContainerOld";elems["hdnFOCISXML"] = "ctl00_contentMain_hdnFOCISXML";elems["txtSearchConsignmentID"] = "ctl00_contentMain_txtSearchConsignmentID";elems["cmdSearch"] = "ctl00_contentMain_cmdSearch";elems["cmdVGM"] = "ctl00_contentMain_cmdVGM";elems["spnVGMmsg"] = "ctl00_contentMain_spnVGMmsg";elems["spnTitletext"] = "ctl00_contentMain_spnTitletext";elems["txtCurrentDate"] = "ctl00_contentMain_txtCurrentDate";elems["tblJobDetails"] = "ctl00_contentMain_tblJobDetails";elems["tblSTL"] = "ctl00_contentMain_tblSTL";elems["tblSTLGrid"] = "ctl00_contentMain_tblSTLGrid";elems["fldVGM"] = "ctl00_contentMain_fldVGM";elems["fldset2"] = "ctl00_contentMain_fldset2";elems["txtConsignmentID"] = "ctl00_contentMain_txtConsignmentID";elems["txtShipperReferences"] = "ctl00_contentMain_txtShipperReferences";elems["txtConsigneeReferences"] = "ctl00_contentMain_txtConsigneeReferences";elems["txtJobMode"] = "ctl00_contentMain_txtJobMode";elems["txtServiceLevel"] = "ctl00_contentMain_txtServiceLevel";elems["txtOrigin"] = "ctl00_contentMain_txtOrigin";elems["txtDestination"] = "ctl00_contentMain_txtDestination";elems["txtJobStatus"] = "ctl00_contentMain_txtJobStatus";elems["txtPieces"] = "ctl00_contentMain_txtPieces";elems["lblActualWeight"] = "ctl00_contentMain_lblActualWeight";elems["txtActualWeight"] = "ctl00_contentMain_txtActualWeight";elems["lblTaxWeight"] = "ctl00_contentMain_lblTaxWeight";elems["txtTaxWeight"] = "ctl00_contentMain_txtTaxWeight";elems["lblCubic"] = "ctl00_contentMain_lblCubic";elems["txtCubicVolume"] = "ctl00_contentMain_txtCubicVolume";elems["txtPOD"] = "ctl00_contentMain_txtPOD";elems["trMap"] = "ctl00_contentMain_trMap";elems["spnMap"] = "ctl00_contentMain_spnMap";elems["aAgilityRef"] = "ctl00_contentMain_aAgilityRef";elems["ctlSTL"] = "ctl00_contentMain_ctlSTL";elems["STLGrid1"] = "ctl00_contentMain_STLGrid1";elems["divChk"] = "ctl00_contentMain_ctlSTL_divChk";elems["headerCells"] = "ctl00_contentMain_ctlSTL_headerCells";elems["rptLocA"] = "ctl00_contentMain_ctlSTL_rptLocA";elems["rptA"] = "ctl00_contentMain_ctlSTL_rptA";elems["trImages"] = "ctl00_contentMain_ctlSTL_trImages";elems["rptB"] = "ctl00_contentMain_ctlSTL_rptB";elems["rptLocB"] = "ctl00_contentMain_ctlSTL_rptLocB";elems["trCustom"] = "ctl00_contentMain_ctlSTL_trCustom";elems["gvEvents"] = "ctl00_contentMain_STLGrid1_gvEvents";elems["ctlSTLGrid"] = "ctl00_contentMain_ctlSTLGrid";elems["gvEvents"] = "ctl00_contentMain_ctlSTLGrid_gvEvents";elems["Span2"] = "ctl00_contentMain_Span2";elems["trVGMDeclaration"] = "ctl00_contentMain_trVGMDeclaration";elems["trAgilityCountry"] = "ctl00_contentMain_trAgilityCountry";elems["trCarrierBookingNo"] = "ctl00_contentMain_trCarrierBookingNo";elems["trUOM"] = "ctl00_contentMain_trUOM";elems["trTotalContainers"] = "ctl00_contentMain_trTotalContainers";elems["lblGridlable"] = "ctl00_contentMain_lblGridlable";elems["tblContainer"] = "ctl00_contentMain_tblContainer";elems["trShipperCompanyName"] = "ctl00_contentMain_trShipperCompanyName";elems["trName"] = "ctl00_contentMain_trName";elems["trTelephone"] = "ctl00_contentMain_trTelephone";elems["trCompanyEmail"] = "ctl00_contentMain_trCompanyEmail";elems["trShippersAddress"] = "ctl00_contentMain_trShippersAddress";elems["imgSignature"] = "ctl00_contentMain_imgSignature";elems["chk1"] = "ctl00_contentMain_chk1";elems["cboJobMode"] = "ctl00_contentMain_cboJobMode";elems["txtCarrierBookingNo"] = "ctl00_contentMain_txtCarrierBookingNo";elems["cboUOM"] = "ctl00_contentMain_cboUOM";elems["cboTotalContainers"] = "ctl00_contentMain_cboTotalContainers";elems["trContainerHeaderRow"] = "ctl00_contentMain_trContainerHeaderRow";elems["trContainer_xtemplate"] = "ctl00_contentMain_trContainer_xtemplate";elems["trContainerSpaceRow"] = "ctl00_contentMain_trContainerSpaceRow";elems["trContainerView_xtemplate"] = "ctl00_contentMain_trContainerView_xtemplate";elems["lblMarks"] = "ctl00_contentMain_lblMarks";elems["hdnContainerCounter"] = "ctl00_contentMain_hdnContainerCounter";elems["lblPackages"] = "ctl00_contentMain_lblPackages";elems["lblGoods"] = "ctl00_contentMain_lblGoods";elems["txtContainerNo_xtemplate"] = "ctl00_contentMain_txtContainerNo_xtemplate";elems["txtContainerSealPackages_xtemplate"] = "ctl00_contentMain_txtContainerSealPackages_xtemplate";elems["cboContainerWeighingDesc_xtemplate"] = "ctl00_contentMain_cboContainerWeighingDesc_xtemplate";elems["txtContainerWeighingDesc_xtemplate"] = "ctl00_contentMain_txtContainerWeighingDesc_xtemplate";elems["txtContainerVGM_xtemplate"] = "ctl00_contentMain_txtContainerVGM_xtemplate";elems["txtContainerDOW_xtemplate"] = "ctl00_contentMain_txtContainerDOW_xtemplate";elems["txtShipperCompanyName"] = "ctl00_contentMain_txtShipperCompanyName";elems["txtName"] = "ctl00_contentMain_txtName";elems["txtTelephone"] = "ctl00_contentMain_txtTelephone";elems["txtCompanyEmail"] = "ctl00_contentMain_txtCompanyEmail";elems["txtShippersAddress"] = "ctl00_contentMain_txtShippersAddress";elems["cboHTML"] = "ctl00_contentMain_cboHTML";elems["tdHTML"] = "ctl00_contentMain_tdHTML";elems["cboPDF"] = "ctl00_contentMain_cboPDF";elems["txtEmailTo"] = "ctl00_contentMain_txtEmailTo";elems["btnEmail"] = "ctl00_contentMain_btnEmail";elems["trEmailNote"] = "ctl00_contentMain_trEmailNote";

function getElement(id) {
	if (typeof(elems[id]) != "undefined") {
		return document.getElementById(elems[id]);
	} else {
		return document.getElementById(id);
	}
}
</script>

    <script type="text/javascript" language="javascript" src="/include/jquery-3.1.0.js"></script>
    <script type="text/javascript" language="javascript" src="/include/jSignature.js"></script>

    <style type="text/css">
        #signatureparent {
            color: black;
            background-color: #FFF9C4   !important;
            padding: 20px;
        }
        /*This is the div within which the signature canvas is fitted*/
        #signature {
            border: 1px dotted black;
            background-color:  #FAFAFA;
        }
        /* Drawing the 'gripper' for touch-enabled devices */
        html.touch #content {
            float: left;
            width: 92%;
        }

    table.dataTable table, table.dataTable table tr, table.dataTable table tr td
    {border-style: none;}
    .message {
		clear:both;float:left;font-size:0.9em;font-style:italic;
    }
		.bold {font-weight:bold;}
		.underline{text-decoration:underline;}
		.indent {margin-left: 40px;}
		.indentRight {margin-right: 10px;}
		.centerAligned {text-align:center;}
		.justify {text-align:justify;}
		li {margin-bottom:5px;}
    </style>
    <!-- initialization -->
    <script language="javascript" type="text/javascript">
        var Application = new Array();
        Application["ApplicationPath"] = "";
        
        var addBehavior = false;
        var scrollStyleSheet = "/include/JobList_FixedTable.css";
        
        if (hasXMLHttpRequest) {
            addBehavior = true;
        } else {
            /*?cc_on
            ?if (?_jscript_version == 5.6) // IE6
            scrollStyleSheet = "/include/JobList_FixedTable_IE6.css";
            addBehavior = true;
            ?end ?*/
          
            var is_ie6 = document.all && (navigator.userAgent.toLowerCase().indexOf("msie 6.") != -1);
            if (is_ie6) {
                scrollStyleSheet = "/include/JobList_FixedTable_IE6.css";
                addBehavior = true;
            }
        }
        
        if (addBehavior) {
            var e = document.createElement('link');
            e.rel = 'stylesheet';
            e.type = 'text/css';
            e.href = scrollStyleSheet;
            document.getElementsByTagName('head')[0].appendChild(e);
            xAddEventListener(window, 'unload', function(){if (window.xthf) window.xthf.unload();}, false);
        } 
   </script>
    <script type="text/javascript">
        var elm = getElement;
        var Prefix = "ctl00_contentMain_";
        function document_onload() {
            var Application = new Array();
            Application["ApplicationPath"] = "";
            page_onload();
            setupBasicSearch();
            setFocus(_elm("txtSearchCustomer_basic"));
            changeHeaders();
        }
        function getOldVal(){
            elm('hdnTotalContainerOld').value = elm(Prefix+'cboTotalContainers').value;
        }
        function AddRows(){
           
            var retVal = false;
            if(elm('tblContainer').style.display == '')
                retVal = confirm("The data will be cleared , do you wish to continue ?");
            if(retVal == false){
                elm(Prefix+'cboTotalContainers').value = elm('hdnTotalContainerOld').value;
                return;
            }
            else{
                var addRows = 0;
                addRows = (elm(Prefix+'cboTotalContainers').value);
                Clear('tblContainer');
                for(var i=0; i<addRows; i++)
                    xTemplAdd('tblContainer', 'ctl00_contentMain_txtContainerNo_',true);
            }
        }
        function Clear(tableID){
            var table = elm(tableID);
            var rowcount = table.rows.length;
            for (var i=rowcount-1; i >=0; i--) {
                if(table.rows[i].id != Prefix+'trContainerHeaderRow' 
                    && table.rows[i].id != Prefix+'trContainer_xtemplate' 
                    && table.rows[i].id != Prefix+'trContainerSpaceRow' 
                    && table.rows[i].id != Prefix+'trContainerView_xtemplate')
                    table.deleteRow(i);
            }
        }
        function Focus(objname) {

            var waterMarkText ='';
            if( objname == Prefix+'txtName')
                waterMarkText  = document.getElementById(Prefix+"hdnname").value;
            if( objname == Prefix+'txtShipperCompanyName')
                waterMarkText  = document.getElementById(Prefix+"hdnShprName").value;
            

            obj = document.getElementById(objname);
            if (obj.value == waterMarkText)
                obj.value = "";
        }
        function Blur(objname) {
           
            var waterMarkText ='';
            if( objname == Prefix+'txtName')
                waterMarkText  = document.getElementById(Prefix+"hdnname").value;
            if ( objname == Prefix+'txtShipperCompanyName')
                waterMarkText  = document.getElementById(Prefix+"hdnShprName").value;
           

            obj = document.getElementById(objname);
            if (obj.value == "")
                obj.value = waterMarkText;
        }
        function chnagecontorl() {
            var table = elm('tblContainer');
            if(table){
                var trTemplateName = table.getAttribute("trTemplate");
                var trTemplate = elm(trTemplateName);
                var rowCounter = elm(table.getAttribute("rowCounter"));
                var populateFlds = table.getAttribute("populateFlds").split(",");
                var fldName;
                var fldName1;
            
                var k = populateFlds.length;

                for (var i = 0; i < parseInt(rowCounter.value) ; i++) {
                    var valid = true;
                    var combined = "";
                    for (var j = 0; j < k; j++) {
                        if(populateFlds[j] == 'cboContainerWeighingDesc_xtemplate')
                        {
                            fldName = trim(populateFlds[j].replace(/xtemplate/g, (i + 1)));
                            fldName1 = trim(populateFlds[j+1].replace(/xtemplate/g, (i + 1)));
                            if(elm(Prefix+'cboJobMode').value == '1' && elm(Prefix + fldName)){
                                elm(Prefix + fldName).style.display = 'none';
                                elm(Prefix + fldName1).style.display = '';
                            }
                        }
                        if(populateFlds[j] == 'txtContainerWeighingDesc_xtemplate'){
                            fldName = trim(populateFlds[j].replace(/xtemplate/g, (i + 1)));
                            fldName1 = trim(populateFlds[j-1].replace(/xtemplate/g, (i + 1)));
                            if(elm(Prefix+'cboJobMode').value == '0' || elm(Prefix+'cboJobMode').value == '')
                                if(elm(Prefix + fldName))
                                {
                                    elm(Prefix + fldName).style.display = 'none';
                                    elm(Prefix + fldName1).style.display = '';}
                        }
                    }
                }
            }
        }
        function getContainerNos() {
            var table = elm('tblContainer');
            if(table){
                var trTemplateName = table.getAttribute("trTemplate");
                var trTemplate = elm(trTemplateName);
                var rowCounter = elm(table.getAttribute("rowCounter"));
                var populateFlds = table.getAttribute("populateFlds").split(",");
                var fldName;
                var cNos='';
                var VGMNos='';
                var msg="";
                var Cmsg="";
                var Vmsg="";
                var Nmsg="";
                var k = populateFlds.length;

                for (var i = 0; i < parseInt(rowCounter.value) ; i++) {
                    var valid = true;
                    var combined = "";
                    for (var j = 0; j < k; j++) {
                        if(populateFlds[j] == 'txtContainerNo_xtemplate')
                        {
                            fldName = trim(populateFlds[j].replace(/xtemplate/g, (i + 1)));
                            if(elm(Prefix+fldName)){
                                if(elm(Prefix+fldName).value!='')
                                {
                                    if(cNos !='')
                                        cNos=cNos+', '+elm(Prefix+fldName).value;
                                    else
                                        cNos= elm(Prefix+fldName).value;
                                }
                                else if(elm(Prefix+fldName).value==''&& Cmsg=="")
                                {
                                    cNos='';
                                    Cmsg+="Please enter Cargo Details.\n";
                                   
                                }
                            }
                        }
                        if(populateFlds[j] == 'txtContainerVGM_xtemplate')
                        {
                            fldName = trim(populateFlds[j].replace(/xtemplate/g, (i + 1)));
                            if(elm(Prefix+fldName)){
                                
                                if(elm(Prefix+fldName).value!=''&&!isNaN(elm(Prefix+fldName).value))
                                {
                                    if(VGMNos !='')
                                        VGMNos=VGMNos+', '+elm(Prefix+fldName).value;
                                    else
                                        VGMNos= elm(Prefix+fldName).value;
                                }
                                else if(elm(Prefix+fldName).value==''&&Vmsg=="")
                                {
                                    VGMNos='';
                                    Vmsg+="Please enter VGM.\n";
                                }
                                else if(elm(Prefix+fldName).value!=''&&isNaN(elm(Prefix+fldName).value)&&Nmsg=="")
                                {
                                    Nmsg+="Please enter valid VGM.\n";
                                    
                                }
                            }
                        }
                    }
                }
            }
            elm(Prefix+'hdnContainerNos').value = cNos;
            if(elm(Prefix+'hdnContainerNos').value == '')
                return msg= 'Please enter cargo details';
            return msg = Cmsg+Vmsg+Nmsg;
            //alert(elm(Prefix+'hdnContainerNos').value);
        }
        function changeHeaders()
        {
            var table = elm('tblContainer');
            var rowCounter = elm(Prefix+table.getAttribute("rowCounter"));
            //alert(rowCounter.value);
            if(rowCounter.value >0 && elm('tblContainer').style.display == '')
                var retVal = confirm("The data will be cleared , do you wish to continue ?");
            if(retVal == false){
                if(elm(Prefix+'lblGridlable').innerText == "Details for LCL")
                    elm(Prefix+'cboJobMode').value = '1'
                else if(elm(Prefix+'lblGridlable').innerText == "Details for FCL")
                    elm(Prefix+'cboJobMode').value = '0'
                else
                    elm(Prefix+'cboJobMode').value = ''
                return;
            }
            else{
                elm(Prefix+'cboTotalContainers').value ='1';
                var trHeaderTemplate = elm(Prefix+'trContainerHeaderRow');
                Clear('tblContainer');
                xTemplAdd("tblContainer", "txtContainer_",true);

                if(elm(Prefix+'cboJobMode').value == '1'){
                    trHeaderTemplate.cells[0].children['0'].innerText='Marks & Numbers';
                    trHeaderTemplate.cells[1].innerText='No. & Type of'+'\n'+'Packages';
                    trHeaderTemplate.cells[2].innerText='Description of'+'\n'+'Goods';
                    elm(Prefix+'lblGridlable').innerText = "Details for LCL";
                    elm('dvLCLMsg').style.display = '';
                    elm('dvFCLMsg').style.display = 'none';
                }
                else{
                    trHeaderTemplate.cells[0].children['0'].innerText='Container no.';
                    trHeaderTemplate.cells[1].innerText='Seal no.(s)';
                    trHeaderTemplate.cells[2].innerText='Weighing method*'+'\n'+'(1 or 2)';
                    elm(Prefix+'lblGridlable').innerText = "Details for FCL";
                }
                trHeaderTemplate.cells[0].style.fontWeight = 'bold';
                trHeaderTemplate.cells[1].style.fontWeight = 'bold';
                trHeaderTemplate.cells[2].style.fontWeight = 'bold';
                chnagecontorl();
                if(elm(Prefix+'cboJobMode').value == '')
                    elm('dvLCLMsg').style.display = elm('dvFCLMsg').style.display = elm(Prefix+'lblGridlable').style.display = elm(Prefix+'tblContainer').style.display = 'none';
                else
                    elm(Prefix+'lblGridlable').style.display = elm(Prefix+'tblContainer').style.display = '';
                if(elm(Prefix+'cboJobMode').value == '0'){
                    elm(Prefix+'trTotalContainers').style.display = '';
                    elm('dvFCLMsg').style.display = '';
                    elm('dvLCLMsg').style.display = 'none';
                }
                else
                    elm(Prefix+'trTotalContainers').style.display = 'none';
            }
        }
        function xTemplAdd(tableID, checkFldPrefix,flag) {
            if(elm("txtAction").value == "View")
                return;
            var table = elm(tableID);
            var count =0;
            var maxRows =0;
            if (elm(tableID)) {
                var trTemplateName = table.getAttribute("trTemplate");
                if(elm(Prefix+'cboJobMode').value == '1')
                    maxRows = 250;
                else if(elm(Prefix+'cboJobMode').value == '0'){
                    if(parseInt(elm(Prefix+'cboTotalContainers').value) < 100 && flag == false)
                        elm(Prefix+'cboTotalContainers').value= parseInt(elm(Prefix+'cboTotalContainers').value) + 1
                    maxRows = (elm(Prefix+'cboTotalContainers').value) == '' ? 1 : parseInt(elm(Prefix+'cboTotalContainers').value);
                }
                var rowCounter = elm(Prefix+table.getAttribute("rowCounter"));
                var addedRows = table.rows.length - table.getAttribute("startRowPos") + 1;
                var checkVal;
                
                if (checkFldPrefix && addedRows >= 1) 
                    checkVal = trim(elm(checkFldPrefix + table.rows[table.rows.length - 1].getAttribute("xPos")).value);
                if (addedRows >= maxRows ){//|| checkVal == "") {
                    var remove = "cmdRemove_" + trTemplateName.replace(/xtemplate/g, rowCounter.value);
                    var add = "cmdAdd_" + trTemplateName.replace(/xtemplate/g, rowCounter.value);
                    if(elm(remove)){
                        elm(remove).style.color = "gray";
                        elm(remove).setAttribute("disabled", "false");
                        elm(remove).setAttribute("disabled", "false");
                    }
                    return;
                }

                count = parseInt(rowCounter.value) + 1;
                var trTemplate = elm(trTemplateName);
                var trNew = table.insertRow(table.rows.length);
                trNew.id = trTemplateName.replace(/xtemplate/g, count);
                trNew.setAttribute("xPos", count);

                for (var i = 0; i < trTemplate.cells.length; i++) {
                    var tdNew = trNew.insertCell(-1);
                    tdNew.innerHTML = trTemplate.cells[i].innerHTML.replace(/xtemplate/g, count);
                }
                rowCounter.value = count;

                if(elm(Prefix+'cboJobMode').value != '1'){
                    //trNew.cells[4].children[2].style.display = "none";
                    if (rowCounter.value > 0) {
                        var remove = "cmdAdd_" + trTemplateName.replace(/xtemplate/g, rowCounter.value - 1);
                        if (elm(remove)) 
                            elm(remove).style.display = "none";
                    }
                }
                if(elm(Prefix+'cboJobMode').value == '1'){
                    var remove = "cmdAdd_" + trTemplateName.replace(/xtemplate/g, rowCounter.value - 1);
                    if (elm(remove)) {
                        elm(remove).style.color = "";
                        if (elm(remove).getAttribute("disabled") == "" || elm(remove).disabled)
                            elm(remove).style.display = "none";
                        else
                            elm(remove).style.display = "none";
                    }
                }
                if (rowCounter.value > 1) {
                    var remove = "cmdRemove_" + trTemplateName.replace(/xtemplate/g, rowCounter.value - 1);
                    if (elm(remove)) {
                        elm(remove).style.color = "";
                        if (elm(remove).getAttribute("disabled") == "" || elm(remove).disabled)
                            elm(remove).disabled = false;
                        else
                            elm(remove).setAttribute("disabled", "false");
                    }
                }
                var trHeaderTemplate = elm(Prefix+'trContainerHeaderRow');
                if(elm(Prefix+'cboJobMode').value == '1'){
                    trHeaderTemplate.cells[0].children['0'].innerText='Marks & Numbers';
                    trHeaderTemplate.cells[1].innerText='No. & Type of'+'\n'+'Packages';
                    trHeaderTemplate.cells[2].innerText='Description of'+'\n'+'Goods';
                    elm(Prefix+'lblGridlable').innerText = "Details for LCL";
                }
                else{
                    trHeaderTemplate.cells[0].children['0'].innerText='Container no.';
                    trHeaderTemplate.cells[1].innerText='Seal no.(s)';
                    trHeaderTemplate.cells[2].innerText='Weighing method*'+'\n'+'(1 or 2)';
                    elm(Prefix+'lblGridlable').innerText = "Details for FCL";
                }
                trHeaderTemplate.cells[0].children['0'].style.fontWeight = 'bold';
                trHeaderTemplate.cells[1].style.fontWeight = 'bold';
                trHeaderTemplate.cells[2].style.fontWeight = 'bold';
            }
            chnagecontorl();
        }
        function xTemplRemove(tableID, trID, src) {
            if (src.getAttribute("disabled") == true || src.getAttribute("disabled") == "disabled")
                return;
            var addedRows = elm(tableID).rows.length - elm(tableID).getAttribute("startRowPos") + 1;
            if (addedRows > 1)
                elm(tableID).deleteRow(elm(trID).rowIndex);
            if(elm(Prefix+'cboJobMode').value == '0')
                elm(Prefix+'cboTotalContainers').value= parseInt(elm(Prefix+'cboTotalContainers').value) - 1;
        }
        function xTemplPop(tableID, valuesArray, isView) {
            if (!tableID || !valuesArray)
                return;
            changeHeaders();
            var table = elm(tableID);
            var trTemplateName;
            var Removeflag = false;
            var Editableflag = true;
            var DefaultVal = false;
            var fldName;

            if (isView)
                trTemplateName = table.getAttribute("trViewTemplate");
            else
                trTemplateName = table.getAttribute("trTemplate");

            var trTemplate = elm(trTemplateName);
            var rowCounter = elm(table.getAttribute("rowCounter"));

            var populateFlds;
            if (isView)
                populateFlds = table.getAttribute("populateViewFlds").split(",");
            else
                populateFlds = table.getAttribute("populateFlds").split(",");

            rowCounter.value = 0;
            for (var i = 0; i < valuesArray[0].length; i++) {
                var trNew = table.insertRow(table.rows.length);
                trNew.id = trTemplateName.replace(/xtemplate/g, i + 1);
                trNew.setAttribute("xPos", i + 1);

                for (var j = 0; j < trTemplate.cells.length; j++) {
                    var tdNew = trNew.insertCell(-1);
                    tdNew.innerHTML = trTemplate.cells[j].innerHTML.replace(/xtemplate/g, i + 1);
                   
                }
                
                var remove = "cmdRemove_" + trTemplateName.replace(/xtemplate/g, i + 1);
                if (elm(remove)) {
                    elm(remove).style.color = "";
                    if (elm(remove).disabled)
                        elm(remove).disabled = false;
                    else
                        elm(remove).setAttribute("disabled", "false");
                }
                for (var j = 0; j < populateFlds.length; j++) {
                    fldName = trim(populateFlds[j].replace(/xtemplate/g, (i + 1).toString()));
                    
                    if (elm(fldName)) {
                        elm(fldName).value = valuesArray[j][i];
                        elm(fldName).setAttribute("lastvalue", elm(fldName).value);
                    }
                    if (j % 2 == 0)
                        elm(fldName).setAttribute("title", elm(fldName).value);
                }
                rowCounter.value++;
            }
        }
        function validateXSS(val) {
            if (val != "") {
                var regex = /^[a-zA-Z0-9\-\@\.\_\*\&\#\!\$\%\^\~]+$/
                var ismatch = regex.test(val);
                if (ismatch)
                    return true;
                else
                    return false;
            }
        }
        function document_onload() {
            if (getElement("txtLoadMessage").value.length > 0) {
                alert(getElement("txtLoadMessage").value);
                getElement("txtLoadMessage").value = "";
            }
            getElement("txtLoadMessage").value = ""
            setLookup("txtAgilityCountry", elm("hdnAgilityCountry").value, elm("hdnAgilityCountryID").value, "txtAgilityCountryID");
            setFocus(getElement("txtSearchConsignmentID"));
            var containersArray = null;
            
            showx(elm("trContainerHeaderRow"));
            if (elm("txtAction").value == "View") {
                elm('dvsig').style.display = 'none';
                elm('dvSigImage').style.display = '';
                xTemplPop("tblContainer", containersArray, true);
            } 
            else {
                if(elm('dvsig'))
                    elm('dvsig').style.display = '';
                if(elm('dvSigImage'))
                    elm('dvSigImage').style.display = 'none';
                xTemplPop("tblContainer", containersArray, false);
            }
        }
        function validateSearch() {
            var txtSearchConsignmentID = getElement("txtSearchConsignmentID");
			
            if (txtSearchConsignmentID != null && txtSearchConsignmentID.value.length == 0) {
                alert("Please enter the Agility Reference.");
                setFocus(txtSearchConsignmentID);
                return false;
            }
            if (!validateXSS(txtSearchConsignmentID.value)) {
                alert("Please enter valid Agility Reference.");
                return false;
            }
            return true;
        }
        function VisitAgilityURL() {
            location.href = "https://www.agility.com/en/";
        }
        function validate() {
            var message = "";
            var emailTo = getElement("txtEmailTo");
            
            if(elm(Prefix+'fldVGM') && elm(Prefix+'fldVGM').style.display == 'none')
                if (emailTo != null && emailTo.value.length == 0)
                    message += "Please enter an email address.\n";

            if(elm(Prefix+'fldVGM') && elm(Prefix+'fldVGM').style.display == ''){
                if(elm(Prefix+'cboJobMode').value == '')
                    message += "Please select VGM declaration.\n";
                if(elm(Prefix+'cboUOM').value == '')
                    message += "Unit of Measure.\n";
                if(elm(Prefix+'hdnAgilityCountryID').value == '' || elm(Prefix+'hdnAgilityCountry').value == '')
                    message += "Country of VGM submission.\n";
               
                if(elm('txtName').value == '' || elm('txtName').value == 'Please specify in CAPITALS' )
                    message += "Please enter name.\n";
                if(elm('txtShippersAddress').value == '')
                    message += "Please enter shippers address.\n";
                if(elm('txtCompanyEmail').value == '' )
                    message += "Please enter company email.\n";
                if(elm('txtShipperCompanyName').value == '' || elm('txtShipperCompanyName').value == "Shipper's Company Name")
                    message += "Please enter shipper company name.\n";
                if(!elm(Prefix+'chk1').checked)
                    message += "Please check terms and conditions before submitting the VGM.\n";
                if(!validateEmail() && elm('txtCompanyEmail').value != '')
                    message += "Please enter valid company email.\n";
                //getContainerNos();
                var msg =getContainerNos();
                if(msg.length>0)
                    message+=msg;
               
            }
            
            if (message.length > 0) {
                alert("Please provide the following information before email:\n" + message);
                return false;
            }
            
            return true;
        }
        function txtbox_onkeypress(cmd, evt) {
            var e = (evt ? evt : window.event);
		
            switch (e.keyCode) {
                case 13:	// Enter
                    getElement(cmd).click();
                    return false;
                    break;
                default:
                    return true;
                    break;
            }
        }
        function searchDefaultParams(atts) {
            atts["CustomerID"] = "|null|";
            atts["UserID"] = "|null|";
            atts["CustomerFilterLevelID"] = "|null|";
            return atts;
        }
        function originCountryParams(atts) {
            return searchDefaultParams(atts);
        }
        function setLookup(fldName, value, idvalue, idfldName) {
            if (!elm(fldName))
                return;

            elm(fldName).value = value;
            elm(fldName).setAttribute("lastvalue", value);

            if (!idfldName)
                idfldName = fldName + "ID";

            elm(idfldName).value = idvalue;
            elm(idfldName).setAttribute("lastvalue", idvalue);
        }
        function originCountrySelect() {
            setLookup("txtAgilityCountry", unescape(arguments[2]), unescape(arguments[0]), "txtAgilityCountryID");
        }
        function originCountry_postLookup() {
            setLookup("hdnAgilityCountry", elm("txtAgilityCountry").value, elm("txtAgilityCountryID").value, "hdnAgilityCountryID");
        }
        function validateEmail() {
            var x = elm('txtCompanyEmail').value;
            var Valid = false;
            var atpos = x.indexOf("@");
            var dotpos = x.lastIndexOf(".");
            if (atpos<1 || dotpos<atpos+2 || dotpos+2>=x.length)
                Valid =  false;
            else
                Valid = true;
            return Valid;
        }
    </script>
</head>
<body onload="document_onload()" onhelp="return jsrsDebugInfo();" onclick="return document_onclick()">
    <form name="aspnetForm" method="post" action="ShipmentTracking.aspx?consignmentid=%24trackid" id="aspnetForm">
<input type="hidden" name="__VIEWSTATE" id="__VIEWSTATE" value="/wEPDwUKLTMzMjI3NzQyOA9kFgJmD2QWAgIDD2QWAgIBD2QWBAILD2QWAgIFDxYCHgdWaXNpYmxlaGQCEQ8WAh8AaBYIAgUPFgIfAGgWAmYPZBYEZg9kFgICAQ8WAh4JaW5uZXJodG1sBQgkdHJhY2tpZGQCAg9kFgYCAw8WAh8BBRJBY3R1YWwgd2VpZ2h0IChrZylkAgcPFgIfAQUWQ2hhcmdlYWJsZSB3ZWlnaHQgKGtnKWQCCw8WAh8BBRZWb2x1bWUgKG08c3VwPjM8L3N1cD4pZAIHDxYCHwBoFgJmD2QWAmYPZBYCAgMPZBYCZg88KwARAgEQFgAWABYADBQrAABkAgkPZBYCZg9kFgJmD2QWAgIBD2QWAmYPPCsAEQIBEBYAFgAWAAwUKwAAZAILD2QWCAIDD2QWAgIBD2QWAgIBDxBkZBQrAQBkAgkPZBYCAgEPZBYCZg8QZGQUKwEAZAILD2QWAgIBD2QWAmYPEGRkFCsBAGQCDw9kFgICAQ9kFgICAg9kFgJmDxBkZBQrAQBkGAIFJWN0bDAwJGNvbnRlbnRNYWluJGN0bFNUTEdyaWQkZ3ZFdmVudHMPZ2QFI2N0bDAwJGNvbnRlbnRNYWluJFNUTEdyaWQxJGd2RXZlbnRzD2dk" />

        <table id="header" cellpadding="0" cellspacing="0" width="100%">
		    <tr>
			    <td>
				    <div style="float:right"><img alt="" src="/image/brand_logos/agility_new.gif"/></div>
				    Agility Tracking
				    <div id="ctl00_divSubtitle" class="subtitle"></div>
			    </td>
		    </tr>
        </table>
        
        <script type="text/javascript">
            $(document).ready(function () {
                $('#'+Prefix+"btnEmail").focus(function () {
                    var data = $sigdiv.jSignature('getData', 'default')
                    data = data.substr(22, data.length)
                    $('#'+Prefix+"imgBytes").val(data);
                });
                var $sigdiv = $("#signature").jSignature();
                var $tools = $("#tools");
                $('<a href="#">Clear</a>').bind('click', function (e) {
                    e.preventDefault();
                    $sigdiv.jSignature('reset')
                }).appendTo($tools)
            })
        </script>
    <input name="ctl00$contentMain$hdnWeightBaseUnit" type="hidden" id="ctl00_contentMain_hdnWeightBaseUnit" />
    <input name="ctl00$contentMain$txtLoadMessage" type="hidden" id="ctl00_contentMain_txtLoadMessage" />
    <input name="ctl00$contentMain$txtGUID" type="hidden" id="ctl00_contentMain_txtGUID" value="65741077-06b9-45a7-8fb9-09fbc3427059" />
    <input name="ctl00$contentMain$imgBytes" type="hidden" id="ctl00_contentMain_imgBytes" />
    <input name="ctl00$contentMain$txtAction" type="hidden" id="ctl00_contentMain_txtAction" />
    <div id="divContainer" style="background: #ffffff; padding: 10px 10px 50px 10px; height:100%">
        <div class="centered" style="background: #ffffff; height: 100%; width: 750px; padding: 10px 10px 10px 10px;">
			<br />
				<fieldset id="ctl00_contentMain_fldset1" style="height:50px;padding-top:10px;">
					<table cellpadding="0" cellspacing="0" border="0" width="90%" style="margin:auto;">
					<tr>
						<td>
							<b>Enter Agility reference</b>&nbsp;&nbsp;&nbsp;
							<input name="ctl00$contentMain$txtSearchConsignmentID" type="text" value="$trackid" id="ctl00_contentMain_txtSearchConsignmentID" class="data2" value="" onkeypress="return txtbox_onkeypress(&#39;cmdSearch&#39;, event);" />
							&nbsp;&nbsp;
							<input onclick="if (!validateSearch()) return; __doPostBack('ctl00$contentMain$cmdSearch','')" name="ctl00$contentMain$cmdSearch" type="button" id="ctl00_contentMain_cmdSearch" value="Search" style="width: 65px;font-size:11px; vertical-align:bottom;" class="btn" onmouseover="this.className=&#39;btn btnhov&#39;" onmouseout="this.className=&#39;btn&#39;" />
                            
                            <input type="button" id="btnAgilityURL" value="Visit Agility.com" style="width:100px;font-size:11px; vertical-align:bottom;" 
								class="btn" onmouseover="this.className='btn btnhov'" onmouseout="this.className='btn'" 
								onclick="VisitAgilityURL();" />
						</td>
					</tr>
                        <tr>
                            <td><br /><span id="ctl00_contentMain_spnVGMmsg" style="display:none">VGM details displays for shipment mode <b>Sea LCL/FCL</b>.</span></td>
                        </tr>
					</table>	
				</fieldset>
			<br />
			<span id="ctl00_contentMain_spnMessage">
			    Shipment <b>$trackid</b> was not found, please check your reference number.<br />
			</span>
            
			
        </div>
    </div>
    <div id="divBasicSearchHidden" style="display:none;">
        <input name="ctl00$contentMain$hdnAgilityCountryID" type="hidden" id="ctl00_contentMain_hdnAgilityCountryID" />
		<input name="ctl00$contentMain$hdnAgilityCountry" type="hidden" id="ctl00_contentMain_hdnAgilityCountry" />
        <input name="ctl00$contentMain$hdnContainerNos" type="hidden" id="ctl00_contentMain_hdnContainerNos" />
        
        <input type="hidden" name="ctl00$contentMain$hdnname" id="ctl00_contentMain_hdnname" value="Please specify in CAPITALS" />
        <input type="hidden" name="ctl00$contentMain$hdnTotalContainerOld" id="ctl00_contentMain_hdnTotalContainerOld" />
        <input type="hidden" name="ctl00$contentMain$hdnFOCISXML" id="ctl00_contentMain_hdnFOCISXML" />
        </div>

    </form>
</body>
</html>
